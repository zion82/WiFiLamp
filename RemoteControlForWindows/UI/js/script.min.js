/*! (c) Developer Alex Dovby 
LampRemote Release It is Created 09.07.2021 - 13:13:21,82 */
;var VERSION="09.07.2021";
/*! iScroll v5.2.0-snapshot ~ (c) 2008-2017 Matteo Spinelli ~ http://cubiq.org/license */
(function(f,a,e){var h=f.requestAnimationFrame||f.webkitRequestAnimationFrame||f.mozRequestAnimationFrame||f.oRequestAnimationFrame||f.msRequestAnimationFrame||function(i){f.setTimeout(i,1000/60)};var c=(function(){var m={};var n=a.createElement("div").style;var k=(function(){var r=["t","webkitT","MozT","msT","OT"],p,q=0,o=r.length;for(;q<o;q++){p=r[q]+"ransform";if(p in n){return r[q].substr(0,r[q].length-1)}}return false})();function l(o){if(k===false){return false}if(k===""){return o}return k+o.charAt(0).toUpperCase()+o.substr(1)}m.getTime=Date.now||function i(){return new Date().getTime()};m.extend=function(q,p){for(var o in p){q[o]=p[o]}};m.addEvent=function(r,q,p,o){r.addEventListener(q,p,!!o)};m.removeEvent=function(r,q,p,o){r.removeEventListener(q,p,!!o)};m.prefixPointerEvent=function(o){return f.MSPointerEvent?"MSPointer"+o.charAt(7).toUpperCase()+o.substr(8):o};m.momentum=function(u,q,r,o,v,w){var p=u-q,s=e.abs(p)/r,x,t;w=w===undefined?0.0006:w;x=u+(s*s)/(2*w)*(p<0?-1:1);t=s/w;if(x<o){x=v?o-(v/2.5*(s/8)):o;p=e.abs(x-u);t=p/s}else{if(x>0){x=v?v/2.5*(s/8):0;p=e.abs(u)+x;t=p/s}}return{destination:e.round(x),duration:t}};var j=l("transform");m.extend(m,{hasTransform:j!==false,hasPerspective:l("perspective") in n,hasTouch:"ontouchstart" in f,hasPointer:!!(f.PointerEvent||f.MSPointerEvent),hasTransition:l("transition") in n});m.isBadAndroid=(function(){var o=f.navigator.appVersion;if(/Android/.test(o)&&!(/Chrome\/\d/.test(o))){var p=o.match(/Safari\/(\d+.\d)/);if(p&&typeof p==="object"&&p.length>=2){return parseFloat(p[1])<535.19}else{return true}}else{return false}})();m.extend(m.style={},{transform:j,transitionTimingFunction:l("transitionTimingFunction"),transitionDuration:l("transitionDuration"),transitionDelay:l("transitionDelay"),transformOrigin:l("transformOrigin"),touchAction:l("touchAction")});m.hasClass=function(p,q){var o=new RegExp("(^|\\s)"+q+"(\\s|$)");return o.test(p.className)};m.addClass=function(p,q){if(m.hasClass(p,q)){return}var o=p.className.split(" ");o.push(q);p.className=o.join(" ")};m.removeClass=function(p,q){if(!m.hasClass(p,q)){return}var o=new RegExp("(^|\\s)"+q+"(\\s|$)","g");p.className=p.className.replace(o," ")};m.offset=function(o){var q=-o.offsetLeft,p=-o.offsetTop;while(o=o.offsetParent){q-=o.offsetLeft;p-=o.offsetTop}return{left:q,top:p}};m.preventDefaultException=function(q,p){for(var o in p){if(p[o].test(q[o])){return true}}return false};m.extend(m.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3});m.extend(m.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(o){return o*(2-o)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(o){return e.sqrt(1-(--o*o))}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(p){var o=4;return(p=p-1)*p*((o+1)*p+o)+1}},bounce:{style:"",fn:function(o){if((o/=1)<(1/2.75)){return 7.5625*o*o}else{if(o<(2/2.75)){return 7.5625*(o-=(1.5/2.75))*o+0.75}else{if(o<(2.5/2.75)){return 7.5625*(o-=(2.25/2.75))*o+0.9375}else{return 7.5625*(o-=(2.625/2.75))*o+0.984375}}}}},elastic:{style:"",fn:function(o){var p=0.22,q=0.4;if(o===0){return 0}if(o==1){return 1}return(q*e.pow(2,-10*o)*e.sin((o-p/4)*(2*e.PI)/p)+1)}}});m.tap=function(q,o){var p=a.createEvent("Event");p.initEvent(o,true,true);p.pageX=q.pageX;p.pageY=q.pageY;q.target.dispatchEvent(p)};m.click=function(q){var p=q.target,o;if(!(/(SELECT|INPUT|TEXTAREA)/i).test(p.tagName)){o=a.createEvent(f.MouseEvent?"MouseEvents":"Event");o.initEvent("click",true,true);o.view=q.view||f;o.detail=1;o.screenX=p.screenX||0;o.screenY=p.screenY||0;o.clientX=p.clientX||0;o.clientY=p.clientY||0;o.ctrlKey=!!q.ctrlKey;o.altKey=!!q.altKey;o.shiftKey=!!q.shiftKey;o.metaKey=!!q.metaKey;o.button=0;o.relatedTarget=null;o._constructed=true;p.dispatchEvent(o)}};m.getTouchAction=function(o,q){var p="none";if(o==="vertical"){p="pan-y"}else{if(o==="horizontal"){p="pan-x"}}if(q&&p!="none"){p+=" pinch-zoom"}return p};m.getRect=function(o){if(o instanceof SVGElement){var p=o.getBoundingClientRect();return{top:p.top,left:p.left,width:p.width,height:p.height}}else{return{top:o.offsetTop,left:o.offsetLeft,width:o.offsetWidth,height:o.offsetHeight}}};return m})();function g(l,j){this.wrapper=typeof l=="string"?a.querySelector(l):l;this.scroller=this.wrapper.children[0];this.scrollerStyle=this.scroller.style;this.options={resizeScrollbars:true,mouseWheelSpeed:20,snapThreshold:0.334,disablePointer:TOUCH_DEVICE,disableTouch:!TOUCH_DEVICE,disableMouse:TOUCH_DEVICE,startX:0,startY:0,scrollY:true,directionLockThreshold:5,momentum:true,bounce:true,bounceTime:600,bounceEasing:"",preventDefault:true,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:true,useTransition:true,useTransform:true,bindToWrapper:typeof f.onmousedown==="undefined"};for(var k in j){this.options[k]=j[k]}this.translateZ=this.options.HWCompositing&&c.hasPerspective?" translateZ(0)":"";this.options.useTransition=c.hasTransition&&this.options.useTransition;this.options.useTransform=c.hasTransform&&this.options.useTransform;this.options.eventPassthrough=this.options.eventPassthrough===true?"vertical":this.options.eventPassthrough;this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault;this.options.scrollY=this.options.eventPassthrough=="vertical"?false:this.options.scrollY;this.options.scrollX=this.options.eventPassthrough=="horizontal"?false:this.options.scrollX;this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough;this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold;this.options.bounceEasing=typeof this.options.bounceEasing=="string"?c.ease[this.options.bounceEasing]||c.ease.circular:this.options.bounceEasing;this.options.resizePolling=this.options.resizePolling===undefined?60:this.options.resizePolling;if(this.options.tap===true){this.options.tap="tap"}if(!this.options.useTransition&&!this.options.useTransform){if(!(/relative|absolute/i).test(this.scrollerStyle.position)){this.scrollerStyle.position="relative"}}if(this.options.shrinkScrollbars=="scale"){this.options.useTransition=false}this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1;if(this.options.probeType==3){this.options.useTransition=false}this.x=0;this.y=0;this.directionX=0;this.directionY=0;this._events={};this._init();this.refresh();this.scrollTo(this.options.startX,this.options.startY);this.enable()}g.prototype={version:"5.2.0-snapshot",_init:function(){this._initEvents();if(this.options.scrollbars||this.options.indicators){this._initIndicators()}if(this.options.mouseWheel){this._initWheel()}if(this.options.snap){this._initSnap()}if(this.options.keyBindings){this._initKeys()}},destroy:function(){this._initEvents(true);clearTimeout(this.resizeTimeout);this.resizeTimeout=null;this._execEvent("destroy")},_transitionEnd:function(i){if(i.target!=this.scroller||!this.isInTransition){return}this._transitionTime();if(!this.resetPosition(this.options.bounceTime)){this.isInTransition=false;this._execEvent("scrollEnd")}},_start:function(k){if(c.eventType[k.type]!=1){var j;if(!k.which){j=(k.button<2)?0:((k.button==4)?1:2)}else{j=k.button}if(j!==0){return}}if(!this.enabled||(this.initiated&&c.eventType[k.type]!==this.initiated)){return}if(this.options.preventDefault&&!c.isBadAndroid&&!c.preventDefaultException(k.target,this.options.preventDefaultException)){k.preventDefault()}var i=k.touches?k.touches[0]:k,l;this.initiated=c.eventType[k.type];this.moved=false;this.distX=0;this.distY=0;this.directionX=0;this.directionY=0;this.directionLocked=0;this.startTime=c.getTime();if(this.options.useTransition&&this.isInTransition){this._transitionTime();this.isInTransition=false;l=this.getComputedPosition();this._translate(e.round(l.x),e.round(l.y));this._execEvent("scrollEnd")}else{if(!this.options.useTransition&&this.isAnimating){this.isAnimating=false;this._execEvent("scrollEnd")}}this.startX=this.x;this.startY=this.y;this.absStartX=this.x;this.absStartY=this.y;this.pointX=i.pageX;this.pointY=i.pageY;this._execEvent("beforeScrollStart")},_move:function(n){if(!this.enabled||c.eventType[n.type]!==this.initiated){return}var p=n.touches?n.touches[0]:n,k=p.pageX-this.pointX,j=p.pageY-this.pointY,o=c.getTime(),i,q,m,l;this.pointX=p.pageX;this.pointY=p.pageY;this.distX+=k;this.distY+=j;m=e.abs(this.distX);l=e.abs(this.distY);if(o-this.endTime>300&&(m<10&&l<10)){return}if(!this.directionLocked&&!this.options.freeScroll){if(m>l+this.options.directionLockThreshold){this.directionLocked="h"}else{if(l>=m+this.options.directionLockThreshold){this.directionLocked="v"}else{this.directionLocked="n"}}}if(this.directionLocked=="h"){if(this.options.eventPassthrough=="vertical"){n.preventDefault()}else{if(this.options.eventPassthrough=="horizontal"){this.initiated=false;return}}j=0}else{if(this.directionLocked=="v"){if(this.options.eventPassthrough=="horizontal"){n.preventDefault()}else{if(this.options.eventPassthrough=="vertical"){this.initiated=false;return}}k=0}}k=this.hasHorizontalScroll?k:0;j=this.hasVerticalScroll?j:0;i=this.x+k;q=this.y+j;if(i>0||i<this.maxScrollX){i=this.options.bounce?this.x+k/3:i>0?0:this.maxScrollX}if(q>0||q<this.maxScrollY){q=this.options.bounce?this.y+j/3:q>0?0:this.maxScrollY}this.directionX=k>0?-1:k<0?1:0;this.directionY=j>0?-1:j<0?1:0;if(!this.moved){this._execEvent("scrollStart")}this.moved=true;this._translate(i,q);if(o-this.startTime>300){this.startTime=o;this.startX=this.x;this.startY=this.y;if(this.options.probeType==1){this._execEvent("scroll")}}if(this.options.probeType>1){this._execEvent("scroll")}},_end:function(o){if(!this.enabled||c.eventType[o.type]!==this.initiated){return}if(this.options.preventDefault&&!c.preventDefaultException(o.target,this.options.preventDefaultException)){o.preventDefault()}var q=o.changedTouches?o.changedTouches[0]:o,k,j,n=c.getTime()-this.startTime,i=e.round(this.x),t=e.round(this.y),s=e.abs(i-this.startX),r=e.abs(t-this.startY),l=0,p="";this.isInTransition=0;this.initiated=0;this.endTime=c.getTime();if(this.resetPosition(this.options.bounceTime)){return}this.scrollTo(i,t);if(!this.moved){if(this.options.tap){c.tap(o,this.options.tap)}if(this.options.click){c.click(o)}this._execEvent("scrollCancel");return}if(this._events.flick&&n<200&&s<100&&r<100){this._execEvent("flick");return}if(this.options.momentum&&n<300){k=this.hasHorizontalScroll?c.momentum(this.x,this.startX,n,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:i,duration:0};j=this.hasVerticalScroll?c.momentum(this.y,this.startY,n,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:t,duration:0};i=k.destination;t=j.destination;l=e.max(k.duration,j.duration);this.isInTransition=1}if(this.options.snap){var m=this._nearestSnap(i,t);this.currentPage=m;l=this.options.snapSpeed||e.max(e.max(e.min(e.abs(i-m.x),1000),e.min(e.abs(t-m.y),1000)),300);i=m.x;t=m.y;this.directionX=0;this.directionY=0;p=this.options.bounceEasing}if(i!=this.x||t!=this.y){if(i>0||i<this.maxScrollX||t>0||t<this.maxScrollY){p=c.ease.quadratic}this.scrollTo(i,t,l,p);return}this._execEvent("scrollEnd")},_resize:function(){var i=this;clearTimeout(this.resizeTimeout);this.resizeTimeout=setTimeout(function(){i.refresh()},this.options.resizePolling)},resetPosition:function(j){var i=this.x,k=this.y;j=j||0;if(!this.hasHorizontalScroll||this.x>0){i=0}else{if(this.x<this.maxScrollX){i=this.maxScrollX}}if(!this.hasVerticalScroll||this.y>0){k=0}else{if(this.y<this.maxScrollY){k=this.maxScrollY}}if(i==this.x&&k==this.y){return false}this.scrollTo(i,k,j,this.options.bounceEasing);return true},disable:function(){this.enabled=false},enable:function(){this.enabled=true},refresh:function(){c.getRect(this.wrapper);this.wrapperWidth=this.wrapper.clientWidth;this.wrapperHeight=this.wrapper.clientHeight;var i=c.getRect(this.scroller);this.scrollerWidth=i.width;this.scrollerHeight=i.height;this.maxScrollX=this.wrapperWidth-this.scrollerWidth;this.maxScrollY=this.wrapperHeight-this.scrollerHeight;this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0;this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0;if(!this.hasHorizontalScroll){this.maxScrollX=0;this.scrollerWidth=this.wrapperWidth}if(!this.hasVerticalScroll){this.maxScrollY=0;this.scrollerHeight=this.wrapperHeight}this.endTime=0;this.directionX=0;this.directionY=0;if(c.hasPointer&&!this.options.disablePointer){this.wrapper.style[c.style.touchAction]=c.getTouchAction(this.options.eventPassthrough,true);if(!this.wrapper.style[c.style.touchAction]){this.wrapper.style[c.style.touchAction]=c.getTouchAction(this.options.eventPassthrough,false)}}this.wrapperOffset=c.offset(this.wrapper);this._execEvent("refresh");this.resetPosition()},on:function(j,i){if(!this._events[j]){this._events[j]=[]}this._events[j].push(i)},off:function(k,j){if(!this._events[k]){return}var i=this._events[k].indexOf(j);if(i>-1){this._events[k].splice(i,1)}},_execEvent:function(m){if(!this._events[m]){return}var k=0,j=this._events[m].length;if(!j){return}for(;k<j;k++){this._events[m][k].apply(this,[].slice.call(arguments,1))}},scrollBy:function(i,l,j,k){i=this.x+i;l=this.y+l;j=j||0;this.scrollTo(i,l,j,k)},scrollTo:function(i,m,k,l){l=l||c.ease.circular;this.isInTransition=this.options.useTransition&&k>0;var j=this.options.useTransition&&l.style;if(!k||j){if(j){this._transitionTimingFunction(l.style);this._transitionTime(k)}this._translate(i,m)}else{this._animate(i,m,k,l.fn)}},scrollToElement:function(k,m,i,p,o){k=k.nodeType?k:this.scroller.querySelector(k);if(!k){return}var n=c.offset(k);n.left-=this.wrapperOffset.left;n.top-=this.wrapperOffset.top;var j=c.getRect(k);var l=c.getRect(this.wrapper);if(i===true){i=e.round(j.width/2-l.width/2)}if(p===true){p=e.round(j.height/2-l.height/2)}n.left-=i||0;n.top-=p||0;n.left=n.left>0?0:n.left<this.maxScrollX?this.maxScrollX:n.left;n.top=n.top>0?0:n.top<this.maxScrollY?this.maxScrollY:n.top;m=m===undefined||m===null||m==="auto"?e.max(e.abs(this.x-n.left),e.abs(this.y-n.top)):m;this.scrollTo(n.left,n.top,m,o)},_transitionTime:function(m){if(!this.options.useTransition){return}m=m||0;var j=c.style.transitionDuration;if(!j){return}this.scrollerStyle[j]=m+"ms";if(!m&&c.isBadAndroid){this.scrollerStyle[j]="0.0001ms";var k=this;h(function(){if(k.scrollerStyle[j]==="0.0001ms"){k.scrollerStyle[j]="0s"}})}if(this.indicators){for(var l=this.indicators.length;l--;){this.indicators[l].transitionTime(m)}}},_transitionTimingFunction:function(k){this.scrollerStyle[c.style.transitionTimingFunction]=k;if(this.indicators){for(var j=this.indicators.length;j--;){this.indicators[j].transitionTimingFunction(k)}}},_translate:function(j,l){if(this.options.useTransform){this.scrollerStyle[c.style.transform]="translate("+j+"px,"+l+"px)"+this.translateZ}else{j=e.round(j);l=e.round(l);this.scrollerStyle.left=j+"px";this.scrollerStyle.top=l+"px"}this.x=j;this.y=l;if(this.indicators){for(var k=this.indicators.length;k--;){this.indicators[k].updatePosition()}}},_initEvents:function(i){var j=i?c.removeEvent:c.addEvent,k=this.options.bindToWrapper?this.wrapper:f;j(f,"orientationchange",this);j(f,"resize",this);if(this.options.click){j(this.wrapper,"click",this,true)}if(!this.options.disableMouse){j(this.wrapper,"mousedown",this);j(k,"mousemove",this);j(k,"mousecancel",this);j(k,"mouseup",this)}if(c.hasPointer&&!this.options.disablePointer){j(this.wrapper,c.prefixPointerEvent("pointerdown"),this);j(k,c.prefixPointerEvent("pointermove"),this);j(k,c.prefixPointerEvent("pointercancel"),this);j(k,c.prefixPointerEvent("pointerup"),this)}if(c.hasTouch&&!this.options.disableTouch){j(this.wrapper,"touchstart",this);j(k,"touchmove",this);j(k,"touchcancel",this);j(k,"touchend",this)}j(this.scroller,"transitionend",this);j(this.scroller,"webkitTransitionEnd",this);j(this.scroller,"oTransitionEnd",this);j(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var j=f.getComputedStyle(this.scroller,null),i,k;if(this.options.useTransform){j=j[c.style.transform].split(")")[0].split(", ");i=+(j[12]||j[4]);k=+(j[13]||j[5])}else{i=+j.left.replace(/[^-\d.]/g,"");k=+j.top.replace(/[^-\d.]/g,"")}return{x:i,y:k}},_initIndicators:function(){var l=this.options.interactiveScrollbars,n=typeof this.options.scrollbars!="string",p=[],k;var o=this;this.indicators=[];if(this.options.scrollbars){if(this.options.scrollY){k={el:d("v",l,this.options.scrollbars),interactive:l,defaultScrollbars:true,customStyle:n,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:false};this.wrapper.appendChild(k.el);p.push(k)}if(this.options.scrollX){k={el:d("h",l,this.options.scrollbars),interactive:l,defaultScrollbars:true,customStyle:n,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:false};this.wrapper.appendChild(k.el);p.push(k)}}if(this.options.indicators){p=p.concat(this.options.indicators)}for(var m=p.length;m--;){this.indicators.push(new b(this,p[m]))}function j(r){if(o.indicators){for(var q=o.indicators.length;q--;){r.call(o.indicators[q])}}}if(this.options.fadeScrollbars){this.on("scrollEnd",function(){j(function(){this.fade()})});this.on("scrollCancel",function(){j(function(){this.fade()})});this.on("scrollStart",function(){j(function(){this.fade(1)})});this.on("beforeScrollStart",function(){j(function(){this.fade(1,true)})})}this.on("refresh",function(){j(function(){this.refresh()})});this.on("destroy",function(){j(function(){this.destroy()});delete this.indicators})},_initWheel:function(){c.addEvent(this.wrapper,"wheel",this);c.addEvent(this.wrapper,"mousewheel",this);c.addEvent(this.wrapper,"DOMMouseScroll",this);this.on("destroy",function(){clearTimeout(this.wheelTimeout);this.wheelTimeout=null;c.removeEvent(this.wrapper,"wheel",this);c.removeEvent(this.wrapper,"mousewheel",this);c.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(m){if(!this.enabled){return}m.preventDefault();var k,j,n,l,i=this;if(this.wheelTimeout===undefined){i._execEvent("scrollStart")}clearTimeout(this.wheelTimeout);this.wheelTimeout=setTimeout(function(){if(!i.options.snap){i._execEvent("scrollEnd")}i.wheelTimeout=undefined},400);if("deltaX" in m){if(m.deltaMode===1){k=-m.deltaX*this.options.mouseWheelSpeed;j=-m.deltaY*this.options.mouseWheelSpeed}else{k=-m.deltaX;j=-m.deltaY}}else{if("wheelDeltaX" in m){k=m.wheelDeltaX/120*this.options.mouseWheelSpeed;j=m.wheelDeltaY/120*this.options.mouseWheelSpeed}else{if("wheelDelta" in m){k=j=m.wheelDelta/120*this.options.mouseWheelSpeed}else{if("detail" in m){k=j=-m.detail/3*this.options.mouseWheelSpeed}else{return}}}}k*=this.options.invertWheelDirection;j*=this.options.invertWheelDirection;if(!this.hasVerticalScroll){k=j;j=0}if(this.options.snap){n=this.currentPage.pageX;l=this.currentPage.pageY;if(k>0){n--}else{if(k<0){n++}}if(j>0){l--}else{if(j<0){l++}}this.goToPage(n,l);return}n=this.x+e.round(this.hasHorizontalScroll?k:0);l=this.y+e.round(this.hasVerticalScroll?j:0);this.directionX=k>0?-1:k<0?1:0;this.directionY=j>0?-1:j<0?1:0;if(n>0){n=0}else{if(n<this.maxScrollX){n=this.maxScrollX}}if(l>0){l=0}else{if(l<this.maxScrollY){l=this.maxScrollY}}this.scrollTo(n,l,0);if(this.options.probeType>1){this._execEvent("scroll")}},_initSnap:function(){this.currentPage={};if(typeof this.options.snap=="string"){this.options.snap=this.scroller.querySelectorAll(this.options.snap)}this.on("refresh",function(){var s=0,q,o=0,k,r,p,v=0,u,z=this.options.snapStepX||this.wrapperWidth,w=this.options.snapStepY||this.wrapperHeight,j,t;this.pages=[];if(!this.wrapperWidth||!this.wrapperHeight||!this.scrollerWidth||!this.scrollerHeight){return}if(this.options.snap===true){r=e.round(z/2);p=e.round(w/2);while(v>-this.scrollerWidth){this.pages[s]=[];q=0;u=0;while(u>-this.scrollerHeight){this.pages[s][q]={x:e.max(v,this.maxScrollX),y:e.max(u,this.maxScrollY),width:z,height:w,cx:v-r,cy:u-p};u-=w;q++}v-=z;s++}}else{j=this.options.snap;q=j.length;k=-1;for(;s<q;s++){t=c.getRect(j[s]);if(s===0||t.left<=c.getRect(j[s-1]).left){o=0;k++}if(!this.pages[o]){this.pages[o]=[]}v=e.max(-t.left,this.maxScrollX);u=e.max(-t.top,this.maxScrollY);r=v-e.round(t.width/2);p=u-e.round(t.height/2);this.pages[o][k]={x:v,y:u,width:t.width,height:t.height,cx:r,cy:p};if(v>this.maxScrollX){o++}}}this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0);if(this.options.snapThreshold%1===0){this.snapThresholdX=this.options.snapThreshold;this.snapThresholdY=this.options.snapThreshold}else{this.snapThresholdX=e.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold);this.snapThresholdY=e.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold)}});this.on("flick",function(){var i=this.options.snapSpeed||e.max(e.max(e.min(e.abs(this.x-this.startX),1000),e.min(e.abs(this.y-this.startY),1000)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,i)})},_nearestSnap:function(k,p){if(!this.pages.length){return{x:0,y:0,pageX:0,pageY:0}}var o=0,n=this.pages.length,j=0;if(e.abs(k-this.absStartX)<this.snapThresholdX&&e.abs(p-this.absStartY)<this.snapThresholdY){return this.currentPage}if(k>0){k=0}else{if(k<this.maxScrollX){k=this.maxScrollX}}if(p>0){p=0}else{if(p<this.maxScrollY){p=this.maxScrollY}}for(;o<n;o++){if(k>=this.pages[o][0].cx){k=this.pages[o][0].x;break}}n=this.pages[o].length;for(;j<n;j++){if(p>=this.pages[0][j].cy){p=this.pages[0][j].y;break}}if(o==this.currentPage.pageX){o+=this.directionX;if(o<0){o=0}else{if(o>=this.pages.length){o=this.pages.length-1}}k=this.pages[o][0].x}if(j==this.currentPage.pageY){j+=this.directionY;if(j<0){j=0}else{if(j>=this.pages[0].length){j=this.pages[0].length-1}}p=this.pages[0][j].y}return{x:k,y:p,pageX:o,pageY:j}},goToPage:function(i,n,j,m){m=m||this.options.bounceEasing;if(i>=this.pages.length){i=this.pages.length-1}else{if(i<0){i=0}}if(n>=this.pages[i].length){n=this.pages[i].length-1}else{if(n<0){n=0}}var l=this.pages[i][n].x,k=this.pages[i][n].y;j=j===undefined?this.options.snapSpeed||e.max(e.max(e.min(e.abs(l-this.x),1000),e.min(e.abs(k-this.y),1000)),300):j;this.currentPage={x:l,y:k,pageX:i,pageY:n};this.scrollTo(l,k,j,m)},next:function(j,l){var i=this.currentPage.pageX,k=this.currentPage.pageY;i++;if(i>=this.pages.length&&this.hasVerticalScroll){i=0;k++}this.goToPage(i,k,j,l)},prev:function(j,l){var i=this.currentPage.pageX,k=this.currentPage.pageY;i--;if(i<0&&this.hasVerticalScroll){i=0;k--}this.goToPage(i,k,j,l)},_initKeys:function(l){var k={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};var j;if(typeof this.options.keyBindings=="object"){for(j in this.options.keyBindings){if(typeof this.options.keyBindings[j]=="string"){this.options.keyBindings[j]=this.options.keyBindings[j].toUpperCase().charCodeAt(0)}}}else{this.options.keyBindings={}}for(j in k){this.options.keyBindings[j]=this.options.keyBindings[j]||k[j]}c.addEvent(f,"keydown",this);this.on("destroy",function(){c.removeEvent(f,"keydown",this)})},_key:function(n){if(!this.enabled){return}var i=this.options.snap,o=i?this.currentPage.pageX:this.x,m=i?this.currentPage.pageY:this.y,k=c.getTime(),j=this.keyTime||0,l=0.25,p;if(this.options.useTransition&&this.isInTransition){p=this.getComputedPosition();this._translate(e.round(p.x),e.round(p.y));this.isInTransition=false}this.keyAcceleration=k-j<200?e.min(this.keyAcceleration+l,50):0;switch(n.keyCode){case this.options.keyBindings.pageUp:if(this.hasHorizontalScroll&&!this.hasVerticalScroll){o+=i?1:this.wrapperWidth}else{m+=i?1:this.wrapperHeight}break;case this.options.keyBindings.pageDown:if(this.hasHorizontalScroll&&!this.hasVerticalScroll){o-=i?1:this.wrapperWidth}else{m-=i?1:this.wrapperHeight}break;case this.options.keyBindings.end:o=i?this.pages.length-1:this.maxScrollX;m=i?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:o=0;m=0;break;case this.options.keyBindings.left:o+=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:m+=i?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:o-=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:m-=i?1:5+this.keyAcceleration>>0;break;default:return}if(i){this.goToPage(o,m);return}if(o>0){o=0;this.keyAcceleration=0}else{if(o<this.maxScrollX){o=this.maxScrollX;this.keyAcceleration=0}}if(m>0){m=0;this.keyAcceleration=0}else{if(m<this.maxScrollY){m=this.maxScrollY;this.keyAcceleration=0}}this.scrollTo(o,m,0);this.keyTime=k},_animate:function(r,q,l,i){var o=this,n=this.x,m=this.y,j=c.getTime(),p=j+l;function k(){var s=c.getTime(),u,t,v;if(s>=p){o.isAnimating=false;o._translate(r,q);if(!o.resetPosition(o.options.bounceTime)){o._execEvent("scrollEnd")}return}s=(s-j)/l;v=i(s);u=(r-n)*v+n;t=(q-m)*v+m;o._translate(u,t);if(o.isAnimating){h(k)}if(o.options.probeType==3){o._execEvent("scroll")}}this.isAnimating=true;k()},handleEvent:function(i){switch(i.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(i);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(i);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(i);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(i);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(i);break;case"keydown":this._key(i);break;case"click":if(this.enabled&&!i._constructed){i.preventDefault();i.stopPropagation()}break}}};function d(l,j,k){var m=a.createElement("div"),i=a.createElement("div");if(k===true){m.style.cssText="position:absolute;z-index:9999";i.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"}i.className="iScrollIndicator";if(l=="h"){if(k===true){m.style.cssText+=";height:7px;left:2px;right:2px;bottom:0";i.style.height="100%"}m.className="iScrollHorizontalScrollbar"}else{if(k===true){m.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px";i.style.width="100%"}m.className="iScrollVerticalScrollbar"}m.style.cssText+=";overflow:hidden";if(!j){m.style.pointerEvents="none"}m.appendChild(i);return m}function b(j,m){this.wrapper=typeof m.el=="string"?a.querySelector(m.el):m.el;this.wrapperStyle=this.wrapper.style;this.indicator=this.wrapper.children[0];this.indicatorStyle=this.indicator.style;this.scroller=j;this.options={listenX:true,listenY:true,interactive:false,resize:true,defaultScrollbars:false,shrink:false,fade:false,speedRatioX:0,speedRatioY:0};for(var n in m){this.options[n]=m[n]}this.sizeRatioX=1;this.sizeRatioY=1;this.maxPosX=0;this.maxPosY=0;if(this.options.interactive){if(!this.options.disableTouch){c.addEvent(this.indicator,"touchstart",this);c.addEvent(f,"touchend",this)}if(!this.options.disablePointer){c.addEvent(this.indicator,c.prefixPointerEvent("pointerdown"),this);c.addEvent(f,c.prefixPointerEvent("pointerup"),this)}if(!this.options.disableMouse){c.addEvent(this.indicator,"mousedown",this);c.addEvent(f,"mouseup",this)}}if(this.options.fade){this.wrapperStyle[c.style.transform]=this.scroller.translateZ;var k=c.style.transitionDuration;if(!k){return}this.wrapperStyle[k]=c.isBadAndroid?"0.0001ms":"0ms";var l=this;if(c.isBadAndroid){h(function(){if(l.wrapperStyle[k]==="0.0001ms"){l.wrapperStyle[k]="0s"}})}this.wrapperStyle.opacity="0"}}b.prototype={handleEvent:function(i){switch(i.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(i);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(i);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(i);break}},destroy:function(){if(this.options.fadeScrollbars){clearTimeout(this.fadeTimeout);this.fadeTimeout=null}if(this.options.interactive){c.removeEvent(this.indicator,"touchstart",this);c.removeEvent(this.indicator,c.prefixPointerEvent("pointerdown"),this);c.removeEvent(this.indicator,"mousedown",this);c.removeEvent(f,"touchmove",this);c.removeEvent(f,c.prefixPointerEvent("pointermove"),this);c.removeEvent(f,"mousemove",this);c.removeEvent(f,"touchend",this);c.removeEvent(f,c.prefixPointerEvent("pointerup"),this);c.removeEvent(f,"mouseup",this)}if(this.options.defaultScrollbars&&this.wrapper.parentNode){this.wrapper.parentNode.removeChild(this.wrapper)}},_start:function(j){var i=j.touches?j.touches[0]:j;j.preventDefault();j.stopPropagation();this.transitionTime();this.initiated=true;this.moved=false;this.lastPointX=i.pageX;this.lastPointY=i.pageY;this.startTime=c.getTime();if(!this.options.disableTouch){c.addEvent(f,"touchmove",this)}if(!this.options.disablePointer){c.addEvent(f,c.prefixPointerEvent("pointermove"),this)}if(!this.options.disableMouse){c.addEvent(f,"mousemove",this)}this.scroller._execEvent("beforeScrollStart")},_move:function(n){var j=n.touches?n.touches[0]:n,k,i,o,m,l=c.getTime();if(!this.moved){this.scroller._execEvent("scrollStart")}this.moved=true;k=j.pageX-this.lastPointX;this.lastPointX=j.pageX;i=j.pageY-this.lastPointY;this.lastPointY=j.pageY;o=this.x+k;m=this.y+i;this._pos(o,m);if(this.scroller.options.probeType==1&&l-this.startTime>300){this.startTime=l;this.scroller._execEvent("scroll")}else{if(this.scroller.options.probeType>1){this.scroller._execEvent("scroll")}}n.preventDefault();n.stopPropagation()},_end:function(k){if(!this.initiated){return}this.initiated=false;k.preventDefault();k.stopPropagation();c.removeEvent(f,"touchmove",this);c.removeEvent(f,c.prefixPointerEvent("pointermove"),this);c.removeEvent(f,"mousemove",this);if(this.scroller.options.snap){var i=this.scroller._nearestSnap(this.scroller.x,this.scroller.y);var j=this.options.snapSpeed||e.max(e.max(e.min(e.abs(this.scroller.x-i.x),1000),e.min(e.abs(this.scroller.y-i.y),1000)),300);if(this.scroller.x!=i.x||this.scroller.y!=i.y){this.scroller.directionX=0;this.scroller.directionY=0;this.scroller.currentPage=i;this.scroller.scrollTo(i.x,i.y,j,this.scroller.options.bounceEasing)}}if(this.moved){this.scroller._execEvent("scrollEnd")}},transitionTime:function(k){k=k||0;var i=c.style.transitionDuration;if(!i){return}this.indicatorStyle[i]=k+"ms";if(!k&&c.isBadAndroid){this.indicatorStyle[i]="0.0001ms";var j=this;h(function(){if(j.indicatorStyle[i]==="0.0001ms"){j.indicatorStyle[i]="0s"}})}},transitionTimingFunction:function(i){this.indicatorStyle[c.style.transitionTimingFunction]=i},refresh:function(){this.transitionTime();if(this.options.listenX&&!this.options.listenY){this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none"}else{if(this.options.listenY&&!this.options.listenX){this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none"}else{this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none"}}if(this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll){c.addClass(this.wrapper,"iScrollBothScrollbars");c.removeClass(this.wrapper,"iScrollLoneScrollbar");if(this.options.defaultScrollbars&&this.options.customStyle){if(this.options.listenX){this.wrapper.style.right="8px"}else{this.wrapper.style.bottom="8px"}}}else{c.removeClass(this.wrapper,"iScrollBothScrollbars");c.addClass(this.wrapper,"iScrollLoneScrollbar");if(this.options.defaultScrollbars&&this.options.customStyle){if(this.options.listenX){this.wrapper.style.right="2px"}else{this.wrapper.style.bottom="2px"}}}c.getRect(this.wrapper);if(this.options.listenX){this.wrapperWidth=this.wrapper.clientWidth;if(this.options.resize){this.indicatorWidth=e.max(e.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8);this.indicatorStyle.width=this.indicatorWidth+"px"}else{this.indicatorWidth=this.indicator.clientWidth}this.maxPosX=this.wrapperWidth-this.indicatorWidth;if(this.options.shrink=="clip"){this.minBoundaryX=-this.indicatorWidth+8;this.maxBoundaryX=this.wrapperWidth-8}else{this.minBoundaryX=0;this.maxBoundaryX=this.maxPosX}this.sizeRatioX=this.options.speedRatioX||(this.scroller.maxScrollX&&(this.maxPosX/this.scroller.maxScrollX))}if(this.options.listenY){this.wrapperHeight=this.wrapper.clientHeight;if(this.options.resize){this.indicatorHeight=e.max(e.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8);this.indicatorStyle.height=this.indicatorHeight+"px"}else{this.indicatorHeight=this.indicator.clientHeight}this.maxPosY=this.wrapperHeight-this.indicatorHeight;if(this.options.shrink=="clip"){this.minBoundaryY=-this.indicatorHeight+8;this.maxBoundaryY=this.wrapperHeight-8}else{this.minBoundaryY=0;this.maxBoundaryY=this.maxPosY}this.maxPosY=this.wrapperHeight-this.indicatorHeight;this.sizeRatioY=this.options.speedRatioY||(this.scroller.maxScrollY&&(this.maxPosY/this.scroller.maxScrollY))}this.updatePosition()},updatePosition:function(){var i=this.options.listenX&&e.round(this.sizeRatioX*this.scroller.x)||0,j=this.options.listenY&&e.round(this.sizeRatioY*this.scroller.y)||0;if(!this.options.ignoreBoundaries){if(i<this.minBoundaryX){if(this.options.shrink=="scale"){this.width=e.max(this.indicatorWidth+i,8);this.indicatorStyle.width=this.width+"px"}i=this.minBoundaryX}else{if(i>this.maxBoundaryX){if(this.options.shrink=="scale"){this.width=e.max(this.indicatorWidth-(i-this.maxPosX),8);this.indicatorStyle.width=this.width+"px";i=this.maxPosX+this.indicatorWidth-this.width}else{i=this.maxBoundaryX}}else{if(this.options.shrink=="scale"&&this.width!=this.indicatorWidth){this.width=this.indicatorWidth;this.indicatorStyle.width=this.width+"px"}}}if(j<this.minBoundaryY){if(this.options.shrink=="scale"){this.height=e.max(this.indicatorHeight+j*3,8);this.indicatorStyle.height=this.height+"px"}j=this.minBoundaryY}else{if(j>this.maxBoundaryY){if(this.options.shrink=="scale"){this.height=e.max(this.indicatorHeight-(j-this.maxPosY)*3,8);this.indicatorStyle.height=this.height+"px";j=this.maxPosY+this.indicatorHeight-this.height}else{j=this.maxBoundaryY}}else{if(this.options.shrink=="scale"&&this.height!=this.indicatorHeight){this.height=this.indicatorHeight;this.indicatorStyle.height=this.height+"px"}}}}this.x=i;this.y=j;if(this.scroller.options.useTransform){this.indicatorStyle[c.style.transform]="translate("+i+"px,"+j+"px)"+this.scroller.translateZ}else{this.indicatorStyle.left=i+"px";this.indicatorStyle.top=j+"px"}},_pos:function(i,j){if(i<0){i=0}else{if(i>this.maxPosX){i=this.maxPosX}}if(j<0){j=0}else{if(j>this.maxPosY){j=this.maxPosY}}i=this.options.listenX?e.round(i/this.sizeRatioX):this.scroller.x;j=this.options.listenY?e.round(j/this.sizeRatioY):this.scroller.y;this.scroller.scrollTo(i,j)},fade:function(l,k){if(k&&!this.visible){return}clearTimeout(this.fadeTimeout);this.fadeTimeout=null;var j=l?250:500,i=l?0:300;l=l?"1":"0";this.wrapperStyle[c.style.transitionDuration]=j+"ms";this.fadeTimeout=setTimeout((function(m){this.wrapperStyle.opacity=m;this.visible=+m}).bind(this,l),i)}};g.utils=c;if(typeof module!="undefined"&&module.exports){module.exports=g}else{if(typeof define=="function"&&define.amd){define(function(){return g})}else{f.IScroll=g}}})(window,document,Math);var iScrollDelay=100;var scroll_ready=false;var scroll_stop=true;var myScroll;function createVerticaleWrapper(f,b,d){removeObject(f);var e='<div class="scroller max">'+b+"</div>";var c=CUSTOM_SCROLL?'<div id="'+f+'" class="wrapper">'+e+"</div>":'<div id="'+f+'" class="wrapper cs_scroll_y">'+b+"</div>";var a="#"+f;window.setTimeout(function(){if(CUSTOM_SCROLL){myScroll=new IScroll(a,{probeType:2,tap:true,mouseWheel:MOUSE_WHEEL});myScroll.on("scroll",startScrollEvents);myScroll.on("scrollEnd",endScrollEvents);document.getElementById(f).addEventListener("tap",d,false)}else{document.getElementById(f).addEventListener("click",d,false)}},150);return c}function startScrollEvents(){console.info("start Scroll Events");scroll_stop=false}function endScrollEvents(){console.info("end Scroll Events");window.setTimeout(function(){scroll_stop=true},1000)}function getBrowser(){var a=navigator.userAgent;if(a.search(/MSIE/)>0){return"MSIE"}if(a.search(/Firefox/)>0){return"Firefox"}if(a.search(/Opera/)>0){return"Opera"}if(a.search(/Chrome/)>0){return"Chrome"}if(a.search(/Safari/)>0){return"Safari"}if(a.search(/Konqueror/)>0){return"Konqueror"}if(a.search(/Iceweasel/)>0){return"Iceweasel"}if(a.search(/SeaMonkey/)>0){return"SeaMonkey"}if(a.search(/Gecko/)>0){return"Gecko"}return"N/A"}function isTouchDevice(){return !!("ontouchstart" in window)}function isDefined(a){return(a!==null&&a!==undefined)}function isUndefined(a){return(a===null||a===undefined)}function isPresent(a){return(a!==null&&a!==undefined&&a!=="")}function removeObject(a){var b=document.getElementById(a);if(b!==null){b.parentNode.removeChild(b)}}function isiOS(){return window.navigator.userAgent.match(/(iPhone|iPad|iPod)/)}function noCallback(a){}function uniqueKey(a){var c={};for(var b=0;b<a.length;b++){var d=a[b];c[d]=true}return Object.keys(c)}function getTimeFormatUTC(d){var b=Date.parse(d);var e="en-US";var a={year:"numeric",month:"long",day:"numeric",timezone:"UTC",hour:"numeric",minute:"numeric",second:"numeric"};var c=isNaN(b)?"&#8226;":new Date(b).toLocaleString(e,a);return c}function getServerSensorData(a,b){$.ajax({type:"GET",url:a,dataType:"json"}).done(function(c){if(c.status==="ZERO_RESULTS"){console.error("Error of performance | status : ZERO_RESULTS")}else{b(c)}}).error(function(){console.error("Error of performance")})}function getHTMLVariable(d){var a=location.search.substring(1).split("&");var b="";var c;for(c=0;c<a.length;c++){if(a[c].split("=")[0]===d){if(a[c].split("=").length>1){b=a[c].split("=")[1]}return b}}return""}function getVersion(a){return a.replace("-"," ").replace("-"," 20")}function outputJson(b,a){$("#json_list").html("<div>CMD • "+b+"</div><pre>"+syntaxHighlight(a)+"</pre>")}function syntaxHighlight(b){var a=(typeof(b)==="string")?b:JSON.stringify(b,undefined,2);a=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return a.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(d){var c="number";if(/^"/.test(d)){if(/:$/.test(d)){c="key"}else{c="string"}}else{if(/true|false/.test(d)){c="boolean"}else{if(/null/.test(d)){c="null"}}}return'<span class="'+c+'">'+d+"</span>"})}function addCrossdomainEventsListener(){if(typeof window.addEventListener!=="undefined"){window.addEventListener("message",onMessageEvent,false)}else{if(typeof window.attachEvent!=="undefined"){window.attachEvent("onmessage",onMessageEvent)}}}var onMessageEvent=function(f){f.stopPropagation();var a=f.data;if(isUndefined(a)){console.error("onMessageEvent Error Data");return}var d;try{d=JSON.parse(a);var g=d.id;var b=d.json;updateUI(g,b)}catch(c){console.error("onMessage Event Error "+c);showMsg(c,true)}};function delphiRequest(a){if(isDefined(a)&&app){console.info("delphiRequest : ",JSON.stringify(a));var b=isDefined(a.ip)?(","+a.ip):"";window.location="#CMD:"+a.cmd+b}}function printJsonData(b,a){outputJson(b,a)}function sendCommandESP(f,b,e,g){var d;if(typeof g==="number"){d="&val="+g}else{d="&valStr="+g}var a="http://"+b+"/cmd?cmd="+e+d;var c=document.getElementById(f);c.src=a}function sendCommandFS(f,b,e,c){var a="http://"+b+"/cmd?cmd="+e+"&valStr=/"+c;var d=document.getElementById(f);d.src=a}function showWebUI(d,b){var a="http://"+b;var c=document.getElementById(d);c.src=a}function DownloadListEffects(e,b,c){var a="http://"+b+"/cmd?cmd="+CMD_LIST+"&valStr=effects"+c+".json";var d=document.getElementById(e);d.src=a}var CONTENT_PATCH="img/",SYNC_INTERVAL=5000;var CMD_SYNC=0,CMD_POWER=1,CMD_NEXT_EFF=2,CMD_PREV_EFF=3,CMD_BRIGHT_UP=4,CMD_BRIGHT_DW=5,CMD_SPEED=6,CMD_SCALE=7,CMD_AUTO=8,CMD_TEXT=9,CMD_INFO=10,CMD_WHITE=11,CMD_FAV=12,CMD_RESET=13,CMD_SHOW_EFF=15,CMD_DEFAULT=16,CMD_RANDOM=17,CMD_FAVORITES=18,CMD_INTIM=20,CMD_OTA=21,CMD_IP=22,CMD_SCAN=32,CMD_ECHO=33,CMD_FS_DIR=40,CMD_DEL_FILE=41,CMD_LIST_EFF=50,CMD_CONFIG=60,CMD_SAVE_CFG=61,CMD_UPDATE_FS=65,CMD_CONNECT=77,CMD_LIST=55;var IC_SCAN={icon:"an_lamp.png",icon_bg:"locator_grid.png",animation:"rotate",animation_img:"locator.png"};var IC_SETUP={icon:"lamp.png",icon_bg:"lamp_bg.png",animation:"blink",animation_img:"color_light.png"};var IC_REMOTE={icon:"remote.png",icon_bg:"remote_bg.png",animation:"rotate",animation_img:"locator.png"};var STR={cofig:["НАСТРОЙКИ ЛАМПЫ","SETUP LAMP"],net_scan:["Сканирование","Network Scan"],auto_scan:["АВТО СКАНИРОВАНИЕ","AUTO SCAN"],select_lamp:["Выбрать лампу","Select Lamp"],effects:["Эффекты","Effects"],loading:["ЗАГРУЗКА","LOADING"],list_eff:["СПИСОК ЭФФЕКТОВ","LIST EFFECTS"],speed:["Скорость","Speed"],scale:["Маштаб","Scale"],fs:["ФАЙЛОВАЯ СИСТЕМА","FILE SYSTEM"],bright:["Яркость","Brightness"],send:["ОТПРАВИТЬ","SEND"],connect:["Cоединение","Connection"],back:["Н А З А Д","B A C K"],connect_ap:["Cоединение AP","CONNECT AP"],load_msg:["Ошибка загрузки","Loading Error"],save_ok:["Настройки Лампы Сохранены","Lamp Settings Saved"],scan_msg:["Нет доступных ламп","No lamps available"]};function createNavigator(a){var b='<div id="l_eff" class="label">• '+STR.bright[lang]+' •</div><div class="btn_box" onClick="clickControlESP(event)">'+(a?'<button id="btn_fs" class="button dev" style="pointer-events:auto; opacity:1;" value="fs">FS</button><button id="btn_set" class="button sym_set dev" value="setup"></button><button id="btn_info" class="button dev" style="pointer-events:auto; opacity:1;" value="info">INFO</button>':'<button id="btn_intim" class="button" value="intim">INTIM</button><button id="btn_cycle" class="button sym_cycle" value="cycle"></button><button id="btn_fav" class="button" value="fav">FAV</button>')+'</div><div class="btn_box" onClick="clickControlESP(event)">'+(a?'<button id="btn_ap" class="button sym_ap" value="ap">AP</button>':'<button id="btn_text" class="button" value="txt">TXT</button>')+'<button id="btn_next" class="button sym_up" value="next"></button>'+(a?'<button id="btn_ota" class="button" value="ota">OTA</button>':'<button id="btn_led" class="button sym_led" value="led"></button>')+'</div><div class="btn_box" onClick="clickControlESP(event)"><button id="btn_b_dw" class="button sym_bdw" value="b_dw" onmousedown="setBrightness(event)"></button><button id="btn_power" class="button sym_power" value="power"></button><button id="btn_b_up" class="button sym_bup" value="b_up" onmousedown="setBrightness(event)"></button></div><div class="btn_box" onClick="clickControlESP(event)"><button id="btn_def" class="button" value="def">DEF</button><button id="btn_prev" class="button sym_dw" value="prev"></button><button id="btn_random" class="button" value="random">RND</button></div><div class="touch_container"><div class="label">• '+STR.speed[lang]+' •</div><div id="touch_speed" class="touch" onClick="clickControlTouch(event)"><div id="speed_min" class="flag"></div><div id="speed_max" class="flag max"></div><div id="ctrl_speed" class="marker"></div><div id="val_speed" class="label_val">255</div></div><div class="label">• '+STR.scale[lang]+' •</div><div id="touch_scale" class="touch hsl" onClick="clickControlTouch(event)"><div id="scale_min" class="flag"></div><div id="scale_max" class="flag max"></div><div id="ctrl_scale" class="marker"></div><div id="val_scale" class="label_val">• 255 •</div></div></div><div id="in_text" class="text_panel hide"><input type="text" id="txt" name="txt" class="text_input" placeholder="Input Text"><button id="btn_send" class="button sym_send" onClick="clickSend(event)">• '+STR.send[lang]+' •</button></div><div id="b_led" class="brightness"><div class="led_blick"></div></div><div id="led" class="led"></div><div id="val_bright" class="label_bright"></div>';b+='<div id="toolbox" class="dev_container hide"></div></div>';$("#remote").html('<div id="navigator">'+b+"</div>")}function getDevPanel(a){a+='<div class="label fix_bottom">• '+STR.back[lang]+' •</div><button id="btn_back" class="btn_back" value="back" onClick="clickControlESP(event)"></button>';return a}function getNewParameters(){var a={ESP_mode:($("#ESP_mode").hasClass("select")?1:0),Power:0,SSDP:$("#SSDP").val().replace(/ /gi," "),Summer_Time:($("#Summer_Time").hasClass("select")?1:0),TimeOut:Number($("#TimeOut").val()),password:$("#password").val(),ntp:$("#ntp").val(),ssid:$("#ssid").val(),ssidAP:$("#ssidAP").val(),passwordAP:$("#passwordAP").val(),time:$("#time").val(),timezone:Number($("#timezone").val()),button_on:($("#button_on").hasClass("select")?1:0),random_on:($("#random_on").hasClass("select")?1:0),print_time:Number($("#print_time").val()),effect_always:($("#effect_always").hasClass("select")?1:0),favorit:($("#favorit").hasClass("select")?1:0),run_text:$("#run_text").val().replace(/ /gi," "),night_time:Number($("#night_time").val()),night_bright:Number($("#night_bright").val()),day_time:Number($("#day_time").val()),day_bright:Number($("#day_bright").val()),time_always:($("#time_always").hasClass("select")?1:0),timer5h:($("#timer5h").hasClass("select")?1:0)};return JSON.stringify(a)}function getSetupPanel(c){var e="";var b=String(c.SSDP||"Lamp by Alex Gyver").replace(/ /gi," ");var a=String(c.run_text||"Welcome").replace(/ /gi," ");var d="";console.info("Name",b);e+='<li id="set_title" class="title">'+((lang===1)?"General Settings":"Общие настройки")+"</li>";d=new itemProtoInput("SSDP",((lang===1)?"Device name":"Имя устройства"),b,"text");e+=d.create();e+='<li class="sub_title">'+((lang===1)?"Connecting to Wi-Fi router":"Подключение к Wi-Fi роутеру")+"</li>";d=new itemProtoCheck("ESP_mode",((lang===1)?"Use router connection":"Подключение через роутер"),c.ESP_mode||1);e+=d.create();d=new itemProtoInput("ssid",((lang===1)?"Network Name":"Имя Сети"),c.ssid,"text");e+=d.create();d=new itemProtoInput("password",((lang===1)?"Password":"Пароль"),c.password,"password");e+=d.create();d=new itemProtoInput("TimeOut",((lang===1)?"Connection timeout":"Тайм-аут соединения"),c.TimeOut,"text");e+=d.create();e+='<li class="sub_title">'+((lang===1)?"Time offset from GMT":"Смещение времени от GMT")+"</li>";d=new itemProtoInput("timezone",((lang===1)?"Time Zone":"Часовой пояс"),c.timezone||2);e+=d.create();d=new itemProtoCheck("Summer_Time",((lang===1)?"Auto Daylight Saving Time":"Авто переход на летнее время"),c.ESP_mode||1);e+=d.create();d=new itemProtoInput("time",((lang===1)?"On device now":"На устройстве сейчас"),c.time||"00:00:00","text");e+=d.create();d=new itemProtoInput("ntp",((lang===1)?"NTP server address":"Адрес NTP сервера"),c.ntp||"pl.pool.ntp.org","text");e+=d.create();e+='<li class="sub_title">'+((lang===1)?"Access point":"Точка доступа")+"</li>";d=new itemProtoInput("ssidAP",((lang===1)?"SSID Access point":"SSID Точки доступа"),c.ssidAP||"WiFiLamp","text");e+=d.create();d=new itemProtoInput("passwordAP",((lang===1)?"Password Access point":"Пароль Точки доступа"),c.password||"31415926","password");e+=d.create();e+='<li class="title">'+((lang===1)?"User Settings":"Настройки пользователя")+"</li>";d=new itemProtoCheck("random_on",((lang===1)?"Random mode":"Режим Random"),c.random_on||0);e+=d.create();e+='<li class="sub_title">'+((lang===1)?"Hardware Button":"Аппаратная Кнопка")+"</li>";d=new itemProtoCheck("button_on",((lang===1)?"Button Activated":"Кнопка Aктивирована"),c.button_on||0);e+=d.create();d=new itemProtoCheck("favorit",((lang===1)?"Only Effects Selected":"Только Отобранные Эффекты"),c.favorit||0);e+=d.create();e+='<li class="sub_title">'+((lang===1)?"Ticker":"Бегущая Строка")+"</li>";d=new itemProtoInput("run_text",((lang===1)?"Scrolling Text":"Текст Бегущей Строки"),a,"text");e+=d.create();d=new itemProtoCheck("time_always",((lang===1)?"Display the time on the off lamp":"Время на выключенной лампе"),c.time_always||0);e+=d.create();d=new itemProtoInput("print_time",((lang===1)?"Output interval for time":"Интервал вывода для времени"),c.print_time||0,"text");e+=d.create();d=new itemProtoInput("night_time",((lang===1)?"Transition to Night Time 0-23":"Переход на Ночное Время 0-23"),c.night_time||22,"text");e+=d.create();d=new itemProtoInput("night_bright",((lang===1)?"Brightness at night 1-255":"Яркость ночью 1-255"),c.night_bright||5,"text");e+=d.create();d=new itemProtoInput("day_time",((lang===1)?"Transition to daytime 0-23":"Переход на дневное время 0-23"),c.day_time||8,"text");e+=d.create();d=new itemProtoInput("day_bright",((lang===1)?"Daytime brightness 1-255":"Яркость днем 1-255"),c.day_bright||250,"text");e+=d.create();e+='<li class="sub_title">'+((lang===1)?"Energy Saving":"Сохранение энергии")+"</li>";d=new itemProtoCheck("effect_always",((lang===1)?"Do not switch on after de-energizing":"Не включать после обесточивания"),c.effect_always||1);e+=d.create();d=new itemProtoCheck("timer5h",((lang===1)?"Auto off timer":"Таймер автовыключения"),c.timer5h||1);e+=d.create();e+='<li class="btn_set" onclick="saveSettings(event)">'+((lang===1)?"SAVE SETTINGS":"СОХРАНИТЬ НАСТРОЙКИ")+"</li>";return'<ul id="setup_panel" onclick="itemClickSetup(event)">'+e+"</ul>"}function getMatrixConnect(a){var b=a[2]==0?"zigzag":"parallel";return b.toUpperCase()+' | <span class="ic_connect'+a[3]+'"></span> | <span class="ic_connect0 dir'+a[4]+'"></span> |'}function getInfo(b){var c='<li class="label">&nbsp;</li>';var a=new itemProto("ssid","ic_radar.png","SSID",b.ssid,false);c+=a.create();a=new itemProto("local_ip","ic_ip.png","LOCAL IP",b.ip,false);c+=a.create();a=new itemProto("mac","ic_mac.png","MAC ADRESS",b.mac.toUpperCase(),false);c+=a.create();a=new itemProto("rssi","ic_level.png","LEVEL SIGNAL RSSI",b.rssi+" dBm",false);c+=a.create();a=new itemProto("matrix","ic_matrix.png",("MATRIX • "+b.matrix[0]+"x"+b.matrix[1]),getMatrixConnect(b.matrix),false);c+=a.create();a=new itemProto("heap","ic_heap.png","FREE HEAP",b.free_heap+" bytes",false);c+=a.create();a=new itemProto("heap","ic_firmware.png","FIRMWARE VERSION",b.ver+" effects",false);c+=a.create();return'<ul id="list">'+c+"</ul>"}function getEffectListItem(f){if(f.length>0){var e="";for(var c=0;c<f.length;c++){var d=f[c];var b=d.name;var a=new itemProto(d.id,"ic_eff.png",b.toUpperCase(),"EFFECT • "+d.id,false);e+=a.create()}}else{e='<li class="item msg">'+STR.load_msg[lang]+"</li>"}return'<ul id="list" onclick="itemClickEffect(event)">'+e+"</ul>"}function getFileListItem(d){if(d.length>0){var e="";for(var b=0;b<d.length;b++){var h=d[b];var g=(getExt(h.name)==="")?"ic_dir":"ic_"+getExt(h.name);var f=(g==="ic_dir")?"• DIRECTORY •":"Size • ";var j=(g!=="ic_dir")?(h.size+" bytes"):"";var a=(g==="ic_dir")?h.name.toUpperCase():h.name;var c=new itemProtoFS(h.name,g+".png",a,f+j,true);e+=c.create()}}else{e='<li class="item_msg"><div class="item_msg">'+STR.load_msg[lang]+"</div></li>"}return'<ul id="list" onclick="itemClickFS(event)">'+e+"</ul>"}function clickSend(a){$("#in_text").toggleClass("hide",true);a.stopPropagation();sendCommandESP("web_srv",WEB_URL,CMD_TEXT,$("#txt").val())}function saveSettings(b){b.stopPropagation();var a=getNewParameters();sendCommandESP("web_srv",WEB_URL,CMD_SAVE_CFG,a)}function itemClickSetup(a){a.stopPropagation();$(a.target).toggleClass("select")}function itemClickFS(a){a.stopPropagation();var b=$(a.target).attr("data-id");$(".item_toggle").toggleClass("select",false);$(a.target).toggleClass("select")}function itemClickDel(a){a.stopPropagation();var b=$(a.target).attr("data-id");$(".item_toggle").toggleClass("select",false);sendCommandFS("web_srv",WEB_URL,CMD_DEL_FILE,b)}function itemClickEffect(a){a.stopPropagation();$("#led").toggleClass("ready",true);var b=$(a.target).attr("data-id");if(isDefined(b)){curEff=b;sendCommandESP("web_srv",WEB_URL,CMD_SHOW_EFF,Number(curEff))}}function getLampListItems(f){var b=new itemProto("scan","ic_radar.png",STR.auto_scan[lang],"",false);var a=b.create();if(f.length>0){var e="";for(var c=0;c<f.length;c++){var d=f[c];if(isDefined(d)){var b=new itemProto(d.ip,"ic_lamp.png",d.name,d.ip,false);e+=b.create()}}}else{e='<li class="item msg">'+STR.scan_msg[lang]+"</li>"}return'<ul id="list" onclick="lampListClick(event);">'+e+a+"</ul>"}function showWaitPanel(){var a='<li class="item_wait"></li>';a+='<li class="item_msg"><div class="item_msg">'+STR.loading[lang]+"</div></li>";$(".scroller").html("<ul>"+a+"</ul>")}function expandList(a){a.stopPropagation();$(".item").toggleClass("select",false);$(a.target).toggleClass("select");fadeList()}function fadeList(){$("#title").toggleClass("err",false);if($("#lamp_grp").hasClass("select")){$("#content_container").fadeOut(10,function(){})}else{window.setTimeout(function(){$("#content_container").fadeIn("slow",function(){myScroll.refresh()})},500)}}function lampListClick(a){a.stopPropagation();var b=$(a.target).attr("data-id");if(isDefined(b)){if(b==="scan"){scanWiFiLamp()}else{selectLamp(b);$("#led").toggleClass("ready",true);eff_package=1;effList.length=0;window.setTimeout(function(){DownloadListEffects("web_srv",WEB_URL,eff_package)},1000)}}}function getExt(a){var b=a.split(".").pop();if(b==a){return""}return b}function selectLamp(b){var a={cmd:b};$("#led").toggleClass("ready",true);$("#cur_lamp").html(STR.connect[lang]);$("#btn_fs").toggleClass("select",false);showWaitPanel();$(".group").toggleClass("select",false);fadeList();curIP=b;WEB_URL=curIP;sendCommandESP("web_srv",WEB_URL,CMD_CONNECT,0);var a={cmd:1,ip:b};delphiRequest(a)}function itemProtoCheck(e,c,d){var a=" data-id="+e;var b=d===1?" select":"";this.create=function(){var f='<li id="'+e+'" class="check'+b+'" '+a+">"+c+"</li>";return f}}function itemProtoInput(e,c,d,b){var a=" data-id="+e;this.create=function(){var f='<li class="item_set"><div class="label_set">• '+c+' •</div><input type="'+b+'" id="'+e+'"'+a+' class="text_input" value='+d+"></li>";return f}}function itemProto(h,d,c,f,a){var g=isPresent(d)?' style="background-image:url('+CONTENT_PATCH+d+');"':"";var b=" data-id="+h;var e=a?"item_toggle":"item";this.create=function(){var i='<li id="item_'+h+'" class="'+e+'"'+b+'><div class="icon_container"><div class="icon_item"'+g+'></div></div><div class="item_name">'+c+'<span class="desc">'+f+"</span></div></li>";return i}}function itemProtoFS(h,d,c,f,a){var g=isPresent(d)?' style="background-image:url('+CONTENT_PATCH+d+');"':"";var b=" data-id="+h;var e=a?"item_toggle":"item";this.create=function(){var i='<li class="'+e+'"'+b+'><div class="icon_container"><div class="icon_item"'+g+'></div></div><div class="item_name">'+c+'<span class="desc">'+f+'</span></div><div class="btn_del" onClick="itemClickDel(event);"'+b+"></div></li>";return i}}function iconAnimateProto(d){if(isUndefined(d)){return""}var c=' style="background-image:url('+CONTENT_PATCH+d.icon_bg+');"';var b=" "+d.animation;var a=' style="background-image:url('+CONTENT_PATCH+d.animation_img+');"';var e=' style="background-image:url('+CONTENT_PATCH+d.icon+');"';this.create=function(){var f='<div class="ic_bg"'+c+'></div><div class="ic_animation'+b+'"'+a+'></div><div class="ic_img"'+e+"></div>";return f}}var TOUCH_DEVICE;var MOUSE_WHEEL=false;var CUSTOM_SCROLL=false;var pass="***";var app=false;var app_cycle=true;var effInterval=0;var maxEff=0;var effList=[];var eff_package=1;var curEff=0;var curIP="";var WEB_URL="";var intervalUpdate;var intervalSync;var intervalScan;var intervalShow;var graph_count=1;var scanTimeout;var dev=true;var lang;var brightnessUp=false;var lampList=[];window.onload=function(){CUSTOM_SCROLL=(isiOS()||getBrowser()==="Chrome"||getBrowser()==="Firefox"||getBrowser()==="MSIE"||getBrowser()==="Gecko");app=(Number(getHTMLVariable("app"))===1);app_cycle=(Number(getHTMLVariable("app_cycle"))===1);effInterval=Number(getHTMLVariable("interval"))||10;scanTimeout=Number(getHTMLVariable("timeout"))||200;curIP=getHTMLVariable("ip")||"192.168.1.1";lang=Number(getHTMLVariable("lang"))||0;WEB_URL=curIP;dev=getHTMLVariable("dev")==="1"||false;var a=isTouchDevice();MOUSE_WHEEL=!a;if(isiOS()){document.addEventListener("touchmove",function(b){b.preventDefault();return false},false)}window.setTimeout(function(){showUI();if(curIP!=="192.168.1.1"){lampList=[{name:"WIFI LED LAMP",ip:curIP}];$("#cur_lamp").html(STR.connect[lang]);window.setTimeout(function(){$(".group").toggleClass("select",false);sendCommandESP("web_srv",WEB_URL,CMD_CONNECT,0)},1000)}else{scanWiFiLamp()}createLampList()},100);window.setTimeout(function(){$(".splash").toggleClass("hide",true)},5200);addCrossdomainEventsListener();console.info("         IP: "+curIP);console.info("        app: "+app);console.info("  app_cycle: "+app_cycle);console.info("    Timeout: "+scanTimeout);console.info("effInterval: "+effInterval)};function Sync(){clearInterval(intervalSync);intervalSync=setInterval(function(){if($("#web_srv").hasClass("hide")){$("#led").toggleClass("ready",true);sendCommandESP("web_srv",WEB_URL,CMD_SYNC,0)}},SYNC_INTERVAL)}function showUI(){var c=document.getElementById("win");var b='<div class="label fix">•&nbsp; RST &nbsp; | &nbsp; DEVELOP MODE &nbsp;•</div><button id="check_dev" class="check_dev" onClick="clickShowDev(event)"></button><button class="rst" value="reset" onClick="clickControlESP(event)"></button>';if(dev){$(".developer_box").html(b)}else{$(".developer_box").empty()}$(".developer_box").toggleClass("icon ",!dev);createNavigator($("#check_dev").hasClass("select"));if(c!=null){c.classList.add("css-fade")}var a={power:0};$("#web_srv").toggleClass("hide",true);$("#content_container").html(createVerticaleWrapper("list_wrapper","",noAction)+'<div id="title" class="list_title"></div>');updateUI(0,a)}function clickControlESP(a){a.stopPropagation();var d=a.target.value;var b=1;var c=0;$("#led").toggleClass("ready",true);if(d!=="setup"){$("#web_srv").toggleClass("hide",true)}$("#btn_random").toggleClass("select",false);if(d!=="setup"){$("#btn_set").toggleClass("select",false)}switch(d){case"fs":case"setup":case"info":case"back":setStateDevButton(a);return;case"ota":b=CMD_OTA;$("#copyclb").html(pass);copytext("#copyclb");window.setTimeout(function(){sendCommandESP("web_srv",WEB_URL,b,0)},600);delphiRequest({cmd:b,ip:curIP});break;case"ap":$(".group").toggleClass("select",false);$(a.target).toggleClass("select");showWaitPanel();WEB_URL=$(a.target).hasClass("select")?"192.168.4.1":curIP;if($(a.target).hasClass("select")){$("#cur_lamp").html(STR.connect_ap[lang]);b=CMD_CONNECT}else{$("#cur_lamp").html("");showMsg(STR.list_eff[lang],false);restoreEffectList()}break;case"prev":b=CMD_PREV_EFF;break;case"next":b=CMD_NEXT_EFF;break;case"intim":b=CMD_INTIM;break;case"cycle":$(a.target).toggleClass("select");if(app_cycle){clearInterval(intervalShow);if($("#btn_cycle").hasClass("select")){b=CMD_PREV_EFF;intervalShow=setInterval(function(){if($("#web_srv").hasClass("hide")){$("#led").toggleClass("ready",true);sendCommandESP("web_srv",WEB_URL,b,0)}},effInterval*1000)}}else{sendCommandESP("web_srv",WEB_URL,CMD_FAVORITES,($("#btn_cycle").hasClass("select")?1:0));return}break;case"fav":b=CMD_FAV;break;case"txt":$("#in_text").toggleClass("hide");$("#txt").unbind();$("#txt").bind("contextmenu",function(f){$("#txt").val("");return false});return;case"led":b=CMD_WHITE;break;case"power":$("#btn_cycle").toggleClass("select",false);b=CMD_POWER;c=3;window.setTimeout(function(){sendCommandESP("web_srv",WEB_URL,CMD_SYNC,0)},250);break;case"b_dw":case"b_up":doneSetBrightness();return;case"reset":$("#btn_power").toggleClass("select",false);b=CMD_RESET;break;case"def":b=CMD_DEFAULT;break;case"random":b=CMD_RANDOM;$(a.target).toggleClass("select",true);break;default:return}sendCommandESP("web_srv",WEB_URL,b,c)}function restoreEffectList(){if(maxEff===effList.length){createEffectList(effList)}else{effList.length=0;eff_package=1;val=eff_package;cmd=CMD_CONNECT;showMsg(STR.list_eff[lang],false);sendCommandESP("web_srv",WEB_URL,cmd,0)}}function updateUI(d,a){if(isDefined(a)){$("#led").toggleClass("ready",false);switch(d){case CMD_CONNECT:showWaitPanel();eff_package=1;pass=a.pass;syncState(a);sendCommandESP("web_srv",a.ip,CMD_LIST,"effects"+eff_package+".json");Sync();break;case CMD_LIST:firstStart(a);return;case CMD_FS_DIR:if(isDefined(a.fs)){$(".scroller").html(getFileListItem(a.fs))}myScroll.refresh();return;case CMD_UPDATE_FS:sendCommandESP("web_srv",WEB_URL,CMD_FS_DIR,0);myScroll.refresh();return;case CMD_DEL_FILE:if(isDefined(a.status)){showMsg(a.status,true)}return;case CMD_SCAN:if(isDefined(a.name)){lampList.push({name:a.name,ip:a.ip});sendCommandESP("web_srv",a.ip,CMD_ECHO,6)}return;case CMD_INFO:createInfoPanel(a);sendCommandESP("web_srv",a.ip,CMD_ECHO,7);return;case CMD_SYNC:syncState(a);break;case CMD_BRIGHT_UP:case CMD_BRIGHT_DW:viewLedBrightness(a.bright);return;case CMD_CONFIG:createSetupPanel(a);return;case CMD_SAVE_CFG:if(a.cfg_save==="OK"){showMsg(STR.save_ok[lang].toUpperCase(),false);window.setTimeout(function(){$("#btn_set").toggleClass("select",false);restoreEffectList()},3000)}return;default:break}if(scroll_stop){if(isDefined(a.list_idx)){var b="#item_"+a.list_idx;if(CUSTOM_SCROLL&&isDefined(b)){window.setTimeout(function(){if(isDefined(myScroll)){myScroll.scrollToElement(b,1500,null,null,IScroll.utils.ease.circular)}$(".item").toggleClass("current",false);$(b).toggleClass("current",true)},10)}}}viewLedBrightness(a.bright);var c=((a.speed||0)/255)*100;$("#ctrl_speed").css("left",c+"%");$("#val_speed").html("• "+(a.speed||"•")+" •");c=(a.scale||0);if(c>100){c=100}$("#ctrl_scale").css("left",c+"%");$("#val_scale").html("• "+(a.scale||"•")+" •");if(!app_cycle){$("#btn_cycle").toggleClass("select",(a.cycle===1))}}}function firstStart(a){fadeList();if(a.status==="OK"){effList=effList.concat(a.list);if(maxEff===effList.length){createEffectList(effList);eff_package=1;window.setTimeout(function(){sendCommandESP("web_srv",WEB_URL,CMD_POWER,1)},500)}else{eff_package++;if(eff_package<4){sendCommandESP("web_srv",a.ip,CMD_LIST,"effects"+eff_package+".json")}}showMsg(STR.list_eff[lang],false)}else{showMsg(a.status,true)}}function viewLedBrightness(c){if(isDefined(c)){var b=Math.floor(c/255*100);var a="hsl(185, 100%,"+Math.floor(15+b*0.4)+"%)";$("#b_led").css("background",a);$("#val_bright").html("• "+b+" •")}}function syncState(a){var c={};var b=0;curEff=a.list_idx||0;maxEff=Number(a.max_eff);$("#cur_lamp").html(a.name);$("#btn_power").toggleClass("select",Number(a.power)===1);if(effList.length>0){c=effList[a.list_idx];$("#touch_scale").toggleClass("hsl",(c.type>0));b=((c.spmin||0)/255)*100;$("#speed_min").css("width",b+"%");b=((255-(c.spmax||0))/255)*100;$("#speed_max").css("width",b+"%");b=(c.scmin||0);$("#scale_min").css("width",b+"%");b=100-(c.scmax||0);$("#scale_max").css("width",b+"%")}}function clickShowDev(a){$(a.target).toggleClass("select");createNavigator($("#check_dev").hasClass("select"));WEB_URL=$("#btn_ap").hasClass("select")?"192.168.4.1":curIP;sendCommandESP("web_srv",WEB_URL,CMD_FAVORITES,0)}function copytext(a){var b=$("<textarea>");$("body").append(b);b.val($(a).text()).select();document.execCommand("copy");b.remove()}function setBrightness(a){a.stopPropagation();if(!$("#web_srv").hasClass("hide")){return}var b=a.target.value;brightnessUp=b=="b_up";intervalUpdate=setInterval(function(){$("#receiver").toggleClass("receive",true);if(brightnessUp){sendCommandESP("web_srv",WEB_URL,CMD_BRIGHT_UP,1)}else{sendCommandESP("web_srv",WEB_URL,CMD_BRIGHT_DW,1)}},150)}function doneSetBrightness(){clearInterval(intervalUpdate);console.info("doneBrightness")}function scanWiFiLamp(){var b=WEB_URL.split(".");var c;var a=2;clearInterval(intervalScan);lampList.length=0;$("#cur_lamp").html(STR.net_scan[lang]);$("#list").empty();createAnimateIcon(IC_SCAN);intervalScan=setInterval(function(){b[3]=a;c=b.join().replace(/,/gi,".");$("#progress").html("SCAN IP • "+c);sendCommandESP("web_srv",c,CMD_SCAN,0);a++;if(a>255){clearInterval(intervalScan);createLampList()}},scanTimeout)}function createEffectList(a){$("#btn_set").toggleClass("select",false);$(".scroller").html(getEffectListItem(a));fadeList();showMsg(STR.list_eff[lang],false)}function createInfoPanel(a){$(".scroller").html(getInfo(a));fadeList();showMsg("MORE INFO",false)}function createSetupPanel(a){$(".scroller").html(getSetupPanel(a.cfg));fadeList();showMsg(STR.cofig[lang],false);myScroll.scrollToElement("#set_title",1500,null,null,IScroll.utils.ease.circular)}function createAnimateIcon(a){var b=new iconAnimateProto(a);var c='<div class="ic_container">'+b.create()+'</div><div id="progress" class="label">• • •</div>';window.setTimeout(function(){$("#actual_content").html(c)},200)}function getDevAnimateIcon(a){var b=new iconAnimateProto(a);var c='<div class="ic_container tools">'+b.create()+"</div>";return c}function createLampList(){var a='<div id="lamp_grp" class="group select"><div class="item_grp"><div class="item_container"><div class="icon_grp" onClick="clickIdentification(event);"></div><div id="cur_lamp">'+STR.select_lamp[lang]+'</div></div><div id="actual_content">'+getLampListItems(lampList)+"</div></div>";$("#lamp_list").html(a);fadeList();showMsg(STR.list_eff[lang],false)}function getLampList(c){var b="";var a=new programItem(c);b+=a.create();return b}function clickControlTouch(b){b.stopPropagation();var e=b.target.id;var c=0;var a=b.offsetX==undefined?b.layerX:b.offsetX;var d=0;switch(e){case"touch_speed":c=CMD_SPEED;d=Math.round(a*1.28);break;case"touch_scale":c=CMD_SCALE;d=Math.round(a*0.5);break;default:return}sendCommandESP("web_srv",WEB_URL,c,d)}function clickIdentification(a){a.stopPropagation();console.info("clickIdentification");sendCommandESP("web_srv",WEB_URL,CMD_IP,0)}function noAction(a){}function showMsg(b,a){$("#title").html("• "+b+" •");$("#title").toggleClass("err",a)}function setStateDevButton(b){var a=(b.target.value==="back");$("#val_bright").toggleClass("hide",!a);if(a){$(".dev").toggleClass("select",false);$("#l_eff").html("• "+STR.bright[lang]+" •");$("#toolbox").toggleClass("hide",false);$("#toolbox").empty();restoreEffectList()}else{$("#l_eff").html("• DEVELOPER TOOLS •");$(b.target).toggleClass("select");$("#lamp_grp").toggleClass("select",false);showWaitPanel();var c="";if($("#btn_fs").hasClass("select")){c='<iframe id="web_fs" class="frame_fs"></iframe>';$("#toolbox").html(getDevPanel(c));sendCommandESP("web_srv",WEB_URL,CMD_FS_DIR,0);showMsg(STR.fs[lang],false);showWebUI("web_fs",WEB_URL+"/fs")}if($("#btn_set").hasClass("select")){$("#toolbox").html(getDevPanel(getDevAnimateIcon(IC_SETUP)));sendCommandESP("web_srv",WEB_URL,CMD_CONFIG,0)}if($("#btn_info").hasClass("select")){$("#toolbox").html(getDevPanel(getDevAnimateIcon(IC_REMOTE)+' <div class="label_ver">• HTML UI Version •<span>'+getVersion(VERSION)+"<span></div>"));showWaitPanel();showMsg(STR.fs[lang],false);sendCommandESP("web_srv",WEB_URL,CMD_INFO,0)}}window.setTimeout(function(){$("#toolbox").toggleClass("hide",a);$("#lamp_list").toggleClass("disabled",!a);fadeList()},500)};